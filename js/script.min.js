window.addEventListener("load",function(){function k(){var a=this.querySelector(".js-vacancy-details");a.classList.contains("is-visible")?(a.classList.remove("is-visible"),a.parentNode.classList.remove("vacancy-expanded")):(a.classList.add("is-visible"),a.parentNode.classList.add("vacancy-expanded"))}var a=new XMLHttpRequest,b=new XMLHttpRequest,c=document.querySelector(".js-container"),d=document.querySelector(".js-keyword"),e=document.querySelector(".js-search-btn"),f=document.querySelector(".js-experience-list"),g={},h=new RegExp(/&|=|\?|!|#|@|\$|%|\^|\*/),i=10,j={base:"https://api.hh.ru/",entity:"vacancies"};d.focus(),b.addEventListener("load",function(){if(200===b.status){var a=JSON.parse(b.responseText).experience,c=0;for(c=0;c<a.length;c++){var d=document.createElement("option");d.innerHTML=a[c].name,d.value=a[c].id,f.appendChild(d)}}}),b.open("GET",j.base+"dictionaries"),b.send(),a.addEventListener("load",function(){var e,d=0,f=[];if(200===a.status){var h=JSON.parse(a.responseText).items,d=h.length>i?i:h.length,j={};for(e=0;d>e;e++){j=document.createElement("div"),j.classList.add("vacancy"),j.classList.add("js-vacancy");var l=h[e],m={},n={},o={},p={},q={},r={},s={};m=document.createElement("h2"),m.innerHTML=l.name,m.classList.add("vacancy-name"),n=document.createElement("a"),n.classList.add("vacancy-company"),n.classList.add("js-link"),n.innerHTML=l.employer.name,n.href=l.employer.alternate_url,n.target="_blank",o=document.createElement("h2"),o.classList.add("vacancy-salary"),o.innerHTML=l.salary?(l.salary.from?l.salary.to?l.salary.from+" - "+l.salary.to:"\u043e\u0442 "+l.salary.from:"\u0434\u043e "+l.salary.to)+" "+l.salary.currency:"\u0417/\u043f \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430",q=l.snippet,p=document.createElement("div"),p.classList.add("vacancy-details"),p.classList.add("js-vacancy-details"),p.innerHTML="<h3>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f</h3><p>"+q.requirement+"</p><h3>\u041e\u0431\u044f\u0437\u0430\u043d\u043d\u043e\u0441\u0442\u0438</h3><p>"+q.responsibility+"</p>",r=document.createElement("a"),r.classList.add("vacancy-link"),r.classList.add("js-link"),r.href=l.alternate_url,r.innerHTML=l.alternate_url,r.target="_blank",s=document.createElement("span"),s.classList.add("vacancy-publishing-date"),s.innerHTML="\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e "+l.published_at.slice(0,10),j.appendChild(m),j.appendChild(n),j.appendChild(o),j.appendChild(p),j.appendChild(r),j.appendChild(s),c.appendChild(j)}for(g=document.querySelectorAll(".js-vacancy"),e=0;e<g.length;e++)g[e].addEventListener("click",k);for(f=document.querySelectorAll(".js-link"),e=0;e<f.length;e++)f[e].addEventListener("click",function(a){a.stopPropagation()})}}),e.addEventListener("click",function(b){if(c.innerHTML="",h.test(d.value)){var e=document.createElement("p");e.innerHTML="\u0412 \u0441\u0442\u0440\u043e\u043a\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",e.classList.add("error-msg"),c.appendChild(e)}else a.open("GET",j.base+j.entity+"?text="+d.value+"&search_fields=name&experience="+f.value+"&area=43&order_by=publication_time&per_page=10&page=0"),a.send();d.focus()})});